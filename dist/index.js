function a0_0x23f1(){const _0x579228=['log','?bot_token=','events','30AREfeZ','9schoQY','âŒ\x20Erro\x20no\x20WebSocket:','run','6lKZmzg','unBlock','wss://talkky.squareweb.app','event','281229AEBmQs','messageDelete','sendMessage','application/json','124542kWiNAi','/api/bot/conversation','send','emit','heartbeatInterval','POST','startHeartbeat','apiUrl','json','push','2835832YbEvnT','createConversation','stringify','request','message','reconnectDelay','178746IWeQvM','ðŸ”Œ\x20Conectando...','Bearer\x20','block','/api/bot/conversations','96006IhJGvz','180gxMHJw','conversations','readyState','wsUrl','578528moTXlI','/api/bot/block','âš \x20ConexÃ£o\x20perdida,\x20tentando\x20reconectar...','DELETE','759780fJgkZw','token'];a0_0x23f1=function(){return _0x579228;};return a0_0x23f1();}function a0_0x281d(_0x124353,_0x12c034){const _0x23f16f=a0_0x23f1();return a0_0x281d=function(_0x281dae,_0x131128){_0x281dae=_0x281dae-0xcb;let _0x49d01a=_0x23f16f[_0x281dae];return _0x49d01a;},a0_0x281d(_0x124353,_0x12c034);}const a0_0x299315=a0_0x281d;(function(_0xdc334d,_0x600d58){const _0x1675e7=a0_0x281d,_0x80b2b0=_0xdc334d();while(!![]){try{const _0x5e238a=-parseInt(_0x1675e7(0xee))/0x1+parseInt(_0x1675e7(0xd3))/0x2+parseInt(_0x1675e7(0xea))/0x3*(parseInt(_0x1675e7(0xdd))/0x4)+-parseInt(_0x1675e7(0xe6))/0x5*(-parseInt(_0x1675e7(0xd8))/0x6)+-parseInt(_0x1675e7(0xe1))/0x7+parseInt(_0x1675e7(0xcd))/0x8*(parseInt(_0x1675e7(0xe7))/0x9)+-parseInt(_0x1675e7(0xd9))/0xa*(parseInt(_0x1675e7(0xf2))/0xb);if(_0x5e238a===_0x600d58)break;else _0x80b2b0['push'](_0x80b2b0['shift']());}catch(_0x2667f3){_0x80b2b0['push'](_0x80b2b0['shift']());}}}(a0_0x23f1,0x39825));import a0_0x55099e from'ws';export default class BotClient{constructor(_0x469538,_0x3c0635=a0_0x299315(0xec),_0x5f2636='https://talkky.squareweb.app'){const _0x32bf2a=a0_0x299315;this[_0x32bf2a(0xdc)]=_0x3c0635+_0x32bf2a(0xe4)+_0x469538,this[_0x32bf2a(0xf9)]=_0x5f2636,this[_0x32bf2a(0xe2)]=_0x469538,this[_0x32bf2a(0xe5)]={},this[_0x32bf2a(0xd2)]=0xbb8,this[_0x32bf2a(0xf6)]=null,setInterval(()=>{},0x1<<0x1e);}['on'](_0x26a99c,_0x26bf6a){const _0x5795bd=a0_0x299315;if(!this['events'][_0x26a99c])this[_0x5795bd(0xe5)][_0x26a99c]=[];this[_0x5795bd(0xe5)][_0x26a99c][_0x5795bd(0xcc)](_0x26bf6a);}['emit'](_0x23d2e6,_0x33f25e){const _0x59752c=a0_0x299315;if(this[_0x59752c(0xe5)][_0x23d2e6]){for(const _0x427a3e of this[_0x59752c(0xe5)][_0x23d2e6])_0x427a3e(_0x33f25e);}}[a0_0x299315(0xf0)](_0x109eb5,_0x4f7fac){const _0x528f22=a0_0x299315;if(!this['ws']||this['ws'][_0x528f22(0xdb)]!==a0_0x55099e['OPEN']){console['log']('âŒ\x20NÃ£o\x20conectado,\x20mensagem\x20nÃ£o\x20enviada.');return;}this['ws'][_0x528f22(0xf4)](JSON[_0x528f22(0xcf)]({'event':'send_message','conversation_id':_0x109eb5,'text':_0x4f7fac}));}['startHeartbeat'](){const _0x5297f7=a0_0x299315;if(this[_0x5297f7(0xf6)])clearInterval(this[_0x5297f7(0xf6)]);this[_0x5297f7(0xf6)]=setInterval(()=>{const _0x16dea2=_0x5297f7;this['ws'][_0x16dea2(0xdb)]===a0_0x55099e['OPEN']&&this['ws']['send'](JSON[_0x16dea2(0xcf)]({'event':'ping'}));},0x3a98);}['run'](){const _0x1050a9=a0_0x299315;console[_0x1050a9(0xe3)](_0x1050a9(0xd4)),this['ws']=new a0_0x55099e(this[_0x1050a9(0xdc)]),this['ws']['on']('open',()=>{const _0x2ba713=_0x1050a9;this[_0x2ba713(0xf5)]('ready'),this[_0x2ba713(0xf8)]();}),this['ws']['on']('message',_0xc620d6=>{const _0x213d48=_0x1050a9,_0x4b17a8=JSON['parse'](_0xc620d6);if(_0x4b17a8[_0x213d48(0xed)]==='new_message')this[_0x213d48(0xf5)]('message',_0x4b17a8);}),this['ws']['on']('close',()=>{const _0x34d3df=_0x1050a9;console['log'](_0x34d3df(0xdf)),setTimeout(()=>this[_0x34d3df(0xe9)](),this[_0x34d3df(0xd2)]);}),this['ws']['on']('error',_0x5082c8=>{const _0x34b0af=_0x1050a9;console[_0x34b0af(0xe3)](_0x34b0af(0xe8),_0x5082c8[_0x34b0af(0xd1)]);});}async[a0_0x299315(0xd0)](_0x1c42cf,_0x3a89d2,_0xb5144a=null){const _0x212b0e=a0_0x299315,_0x2e7d20=await fetch(''+this[_0x212b0e(0xf9)]+_0x3a89d2,{'method':_0x1c42cf,'headers':{'Content-Type':_0x212b0e(0xf1),'Authorization':_0x212b0e(0xd5)+this['token']},'body':_0xb5144a?JSON[_0x212b0e(0xcf)](_0xb5144a):undefined});return _0x2e7d20[_0x212b0e(0xcb)]();}async[a0_0x299315(0xd6)](_0x29499e){const _0x29c8f2=a0_0x299315;return await this[_0x29c8f2(0xd0)](_0x29c8f2(0xf7),_0x29c8f2(0xde),{'user_id':_0x29499e});}async[a0_0x299315(0xeb)](_0x2ceeb1){const _0x3bb8ef=a0_0x299315;return await this[_0x3bb8ef(0xd0)](_0x3bb8ef(0xe0),_0x3bb8ef(0xde),{'user_id':_0x2ceeb1});}async[a0_0x299315(0xda)](){const _0x113885=a0_0x299315;return await this['request']('GET',_0x113885(0xd7));}async[a0_0x299315(0xce)](_0xf36f9){const _0x4e8e21=a0_0x299315;return await this[_0x4e8e21(0xd0)]('POST',_0x4e8e21(0xf3),{'credentials':_0xf36f9});}async[a0_0x299315(0xef)](_0x5985e9){const _0x22c4bb=a0_0x299315;return await this[_0x22c4bb(0xd0)](_0x22c4bb(0xe0),'/api/bot/conversation/message',{'message_id':_0x5985e9});}}